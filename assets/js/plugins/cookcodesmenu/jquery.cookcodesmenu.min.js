(function(e,n,t){function a(n,t){this.element=n,this.settings=e.extend({},i,t),this.settings.duplicate||t.hasOwnProperty("removeIds")||(this.settings.removeIds=!1),this._defaults=i,this._name=s,this.init()}var i={display:1920,brand:'<div style="display: none;">LOGO</div>',label:'<span class="butter-span"><span></span><span></span><span></span></span>Все услуги',duplicate:!0,duration:200,easingOpen:"swing",easingClose:"swing",closedSymbol:"<i class='fas fa-angle-down'></i>",openedSymbol:"<i class='fas fa-angle-up'></i>",prependTo:"body",appendTo:".cookcodesmenu-bar",parentTag:"a",closeOnClick:!0,allowParentLinks:!0,nestedParentLinks:!0,showChildren:!1,removeIds:!0,removeClasses:!1,removeStyles:!1,animations:"jquery",init:function(){},beforeOpen:function(){},beforeClose:function(){},afterOpen:function(){},afterClose:function(){}},s="cookcodesmenu",o="cookcodesmenu",l={DOWN:40,ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38};a.prototype.init=function(){var a,i,s,r,c=this,d=e(this.element),p=this.settings,u=d[0].getAttribute("id");if(i=p.display,e(t).on("load resize",function(n){s=e(t).width(),s<=i?(e("#"+u).addClass("menuHidden"),e(".cookcodesmenu_menu").css("display","block")):(e("#"+u).removeClass("menuHidden"),e(".cookcodesmenu_menu").css("display","none"))}),p.duplicate?c.mobileNav=d.clone():c.mobileNav=d,p.removeIds&&(c.mobileNav.removeAttr("id"),c.mobileNav.find("*").each(function(n,t){e(t).removeAttr("id")})),p.removeClasses&&(c.mobileNav.removeAttr("class"),c.mobileNav.find("*").each(function(n,t){e(t).removeAttr("class")})),p.removeStyles&&(c.mobileNav.removeAttr("style"),c.mobileNav.find("*").each(function(n,t){e(t).removeAttr("style")})),a=o+"_icon",""===p.label&&(a+=" "+o+"_no-text"),"a"==p.parentTag&&(p.parentTag='a href="#"'),c.mobileNav.attr("class",o+"_nav"),r=e('<div class="'+o+'_menu"></div>'),""!==p.brand){var m=e('<div class="'+o+'_brand">'+p.brand+"</div>");e(r).append(m)}c.btn=e(["<"+p.parentTag+' aria-haspopup="true" role="button" tabindex="0" class="'+o+"_btn "+o+'_collapsed">','<span class="'+o+'_menutxt">'+p.label+"</span>",'<span class="'+a+'">','<span class="'+o+'_icon-bar"></span>','<span class="'+o+'_icon-bar"></span>','<span class="'+o+'_icon-bar"></span>',"</span>","</"+p.parentTag+">"].join("")),e(r).append(c.btn),""!==p.appendTo?e(p.appendTo).append(r):e(p.prependTo).prepend(r),r.append(c.mobileNav);var v=c.mobileNav.find("li");e(v).each(function(){var n=e(this),t={};if(t.children=n.children("ul").attr("role","menu"),n.data("menu",t),t.children.length>0){var a=n.contents(),i=!1,s=[];e(a).each(function(){return!e(this).is("ul")&&(s.push(this),void(e(this).is("a")&&(i=!0)))});var l=e("<"+p.parentTag+' role="menuitem" aria-haspopup="true" tabindex="-1" class="'+o+'_item"/>');if(p.allowParentLinks&&!p.nestedParentLinks&&i)e(s).wrapAll('<span class="'+o+"_parent-link "+o+'_row"/>').parent();else{var r=e(s).wrapAll(l).parent();r.addClass(o+"_row")}p.showChildren?n.addClass(o+"_open"):n.addClass(o+"_collapsed"),n.addClass(o+"_parent");var d=e('<span class="'+o+'_arrow">'+(p.showChildren?p.openedSymbol:p.closedSymbol)+"</span>");p.allowParentLinks&&!p.nestedParentLinks&&i&&(d=d.wrap(l).parent()),e(s).last().after(d)}else 0===n.children().length&&n.addClass(o+"_txtnode");n.children("a").attr("role","menuitem").click(function(n){p.closeOnClick&&!e(n.target).parent().closest("li").hasClass(o+"_parent")&&e(c.btn).click()}),p.closeOnClick&&p.allowParentLinks&&(n.children("a").children("a").click(function(n){e(c.btn).click()}),n.find("."+o+"_parent-link a:not(."+o+"_item)").click(function(n){e(c.btn).click()}))}),e(v).each(function(){var n=e(this).data("menu");p.showChildren||c._visibilityToggle(n.children,null,!1,null,!0)}),c._visibilityToggle(c.mobileNav,null,!1,"init",!0),c.mobileNav.attr("role","menu"),e(n).mousedown(function(){c._outlines(!1)}),e(n).keyup(function(){c._outlines(!0)}),e(c.btn).click(function(e){e.preventDefault(),c._menuToggle()}),c.mobileNav.on("click","."+o+"_item",function(n){n.preventDefault(),c._itemClick(e(this))}),e(c.btn).keydown(function(n){var t=n||event;switch(t.keyCode){case l.ENTER:case l.SPACE:case l.DOWN:n.preventDefault(),t.keyCode===l.DOWN&&e(c.btn).hasClass(o+"_open")||c._menuToggle(),e(c.btn).next().find('[role="menuitem"]').first().focus()}}),c.mobileNav.on("keydown","."+o+"_item",function(n){var t=n||event;switch(t.keyCode){case l.ENTER:n.preventDefault(),c._itemClick(e(n.target));break;case l.RIGHT:n.preventDefault(),e(n.target).parent().hasClass(o+"_collapsed")&&c._itemClick(e(n.target)),e(n.target).next().find('[role="menuitem"]').first().focus()}}),c.mobileNav.on("keydown",'[role="menuitem"]',function(n){var t=n||event;switch(t.keyCode){case l.DOWN:n.preventDefault();var a=e(n.target).parent().parent().children().children('[role="menuitem"]:visible'),i=a.index(n.target),s=i+1;a.length<=s&&(s=0);var r=a.eq(s);r.focus();break;case l.UP:n.preventDefault();var a=e(n.target).parent().parent().children().children('[role="menuitem"]:visible'),i=a.index(n.target),r=a.eq(i-1);r.focus();break;case l.LEFT:if(n.preventDefault(),e(n.target).parent().parent().parent().hasClass(o+"_open")){var d=e(n.target).parent().parent().prev();d.focus(),c._itemClick(d)}else e(n.target).parent().parent().hasClass(o+"_nav")&&(c._menuToggle(),e(c.btn).focus());break;case l.ESCAPE:n.preventDefault(),c._menuToggle(),e(c.btn).focus()}}),p.allowParentLinks&&p.nestedParentLinks&&e("."+o+"_item a").click(function(e){e.stopImmediatePropagation()})},a.prototype._menuToggle=function(e){var n=this,t=n.btn,a=n.mobileNav;t.hasClass(o+"_collapsed")?(t.removeClass(o+"_collapsed"),t.addClass(o+"_open")):(t.removeClass(o+"_open"),t.addClass(o+"_collapsed")),t.addClass(o+"_animating"),n._visibilityToggle(a,t.parent(),!0,t)},a.prototype._itemClick=function(e){var n=this,t=n.settings,a=e.data("menu");a||(a={},a.arrow=e.children("."+o+"_arrow"),a.ul=e.next("ul"),a.parent=e.parent(),a.parent.hasClass(o+"_parent-link")&&(a.parent=e.parent().parent(),a.ul=e.parent().next("ul")),e.data("menu",a)),a.parent.hasClass(o+"_collapsed")?(a.arrow.html(t.openedSymbol),a.parent.removeClass(o+"_collapsed"),a.parent.addClass(o+"_open"),a.parent.addClass(o+"_animating"),n._visibilityToggle(a.ul,a.parent,!0,e)):(a.arrow.html(t.closedSymbol),a.parent.addClass(o+"_collapsed"),a.parent.removeClass(o+"_open"),a.parent.addClass(o+"_animating"),n._visibilityToggle(a.ul,a.parent,!0,e))},a.prototype._visibilityToggle=function(n,t,a,i,s){function l(n,t){e(n).removeClass(o+"_animating"),e(t).removeClass(o+"_animating"),s||d.afterOpen(n)}function r(t,a){n.attr("aria-hidden","true"),p.attr("tabindex","-1"),c._setVisAttr(n,!0),n.hide(),e(t).removeClass(o+"_animating"),e(a).removeClass(o+"_animating"),s?"init"==t&&d.init():d.afterClose(t)}var c=this,d=c.settings,p=c._getActionItems(n),u=0;a&&(u=d.duration),n.hasClass(o+"_hidden")?(n.removeClass(o+"_hidden"),s||d.beforeOpen(i),"jquery"===d.animations?n.stop(!0,!0).slideDown(u,d.easingOpen,function(){l(i,t)}):"velocity"===d.animations&&n.velocity("finish").velocity("slideDown",{duration:u,easing:d.easingOpen,complete:function(){l(i,t)}}),n.attr("aria-hidden","false"),p.attr("tabindex","0"),c._setVisAttr(n,!1)):(n.addClass(o+"_hidden"),s||d.beforeClose(i),"jquery"===d.animations?n.stop(!0,!0).slideUp(u,this.settings.easingClose,function(){r(i,t)}):"velocity"===d.animations&&n.velocity("finish").velocity("slideUp",{duration:u,easing:d.easingClose,complete:function(){r(i,t)}}))},a.prototype._setVisAttr=function(n,t){var a=this,i=n.children("li").children("ul").not("."+o+"_hidden");t?i.each(function(){var n=e(this);n.attr("aria-hidden","true");var i=a._getActionItems(n);i.attr("tabindex","-1"),a._setVisAttr(n,t)}):i.each(function(){var n=e(this);n.attr("aria-hidden","false");var i=a._getActionItems(n);i.attr("tabindex","0"),a._setVisAttr(n,t)})},a.prototype._getActionItems=function(e){var n=e.data("menu");if(!n){n={};var t=e.children("li"),a=t.find("a");n.links=a.add(t.find("."+o+"_item")),e.data("menu",n)}return n.links},a.prototype._outlines=function(n){n?e("."+o+"_item, ."+o+"_btn").css("outline",""):e("."+o+"_item, ."+o+"_btn").css("outline","none")},a.prototype.toggle=function(){var e=this;e._menuToggle()},a.prototype.open=function(){var e=this;e.btn.hasClass(o+"_collapsed")&&e._menuToggle()},a.prototype.close=function(){var e=this;e.btn.hasClass(o+"_open")&&e._menuToggle()},e.fn[s]=function(n){var t=arguments;if(void 0===n||"object"==typeof n)return this.each(function(){e.data(this,"plugin_"+s)||e.data(this,"plugin_"+s,new a(this,n))});if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var i;return this.each(function(){var o=e.data(this,"plugin_"+s);o instanceof a&&"function"==typeof o[n]&&(i=o[n].apply(o,Array.prototype.slice.call(t,1)))}),void 0!==i?i:this}}})(jQuery,document,window);